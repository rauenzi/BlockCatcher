(()=>{"use strict";var t={354:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(916),r=i.n(s),n=i(282),o=i.n(n)()(r());o.push([t.id,"*,::before,::after{-webkit-box-sizing:border-box;box-sizing:border-box}html{width:512px;margin:10px auto 0 auto;font-family:verdana,arial,sans-serif;background:#1e1e1e}body{background:#3c3c3c;min-width:fit-content;padding:1px 20px 20px 20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.25);color:#ddd}canvas{border:3px solid #000}.wide{width:512px;text-align:center}h2,legend{font-weight:700;color:#0f0}.flex{display:flex;flex-wrap:wrap}.column{flex-direction:column}.flex-wrap{flex-wrap:wrap}.no-wrap{flex-wrap:nowrap}.flex-center{justify-content:center;align-items:center}.flex-align-center{align-items:center}.flex-justify-center{justify-content:center}.flex-space-evenly{justify-content:space-evenly}.flex-25{flex:0 0 25%;max-width:25%}.flex-33{flex:0 0 33.33333%;max-width:33.33333%}.flex-50{flex:0 0 50%;max-width:50%}.flex-66{flex:0 0 66.666666%;max-width:66.666666%}.flex-75{flex:0 0 75%;max-width:75%}@media only screen and (max-width:768px){.flex-25,.flex-33,.flex-50,.flex-66,.flex-75{flex:0 0 100%;max-width:100%}}#game-display{border-radius:12px;overflow:hidden}#hud{position:absolute;left:0;right:0;justify-content:space-between;padding:10px 20px;z-index:1;font-weight:600}#hud span[id]{color:#0f0}#canvas-wrap{position:relative}.overlay{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.9);transition:opacity 200ms ease;opacity:1}.overlay.hide{opacity:0}.overlay span{display:flex;justify-content:center;align-items:center;font-weight:600}#status{font-size:32px}#status.loss{color:red}#status.win{color:#0f0}",""]);const a=o},282:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,r,n){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);s&&o[l[0]]||(void 0!==n&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=n),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},916:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var n={},o=[],a=0;a<t.length;a++){var h=t[a],c=s.base?h[0]+s.base:h[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var f=i(d),u={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==f)e[f].references++,e[f].updater(u);else{var p=r(u,s);s.byIndex=a,e.splice(a,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function r(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,r){var n=s(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<n.length;o++){var a=i(n[o]);e[a].references--}for(var h=s(t,r),c=0;c<n.length;c++){var l=i(n[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}n=h}}},976:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},566:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},147:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},298:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,r&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},396:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={id:s,exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{const t=[0,1,0],e=[0,0,0],s=[{color:[1,0,0],speed:1,size:2.5,points:1},{color:[0,0,1],speed:2,size:1.5,points:5},{color:[1,1,1],speed:3,size:1,points:25}];class r{constructor(t){if(this.webgl=t.getContext("webgl"),!this.webgl)return alert("WebGL is not available");this.webgl.viewport(0,0,512,512),this.webgl.clearColor(...e,1),this.webgl.clear(this.webgl.COLOR_BUFFER_BIT),this.vertexShader=this.webgl.createShader(this.webgl.VERTEX_SHADER),this.webgl.shaderSource(this.vertexShader,"attribute vec4 myPosition;\n\nuniform float xshift;\nuniform float yshift;\nmat3 Mtrans;\n\nvoid main() {\nvec3 vi;\nvi[0] = myPosition.x;\nvi[1] = myPosition.y;\nvi[2] = 1.0;\nMtrans = mat3(1,0,0,\n              0,1,0,\n              xshift,yshift,1);\n    vi = Mtrans * vi;\n    gl_PointSize = 1.0;\n    gl_Position.x = vi[0];\n    gl_Position.y = vi[1];\n    gl_Position.z = 0.0;\n    gl_Position.w = 1.0;\n}"),this.webgl.compileShader(this.vertexShader),this.fragShader=this.webgl.createShader(this.webgl.FRAGMENT_SHADER),this.webgl.shaderSource(this.fragShader,"precision mediump float;\n\nuniform vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}"),this.webgl.compileShader(this.fragShader),this.shaderProgram=this.webgl.createProgram(),this.webgl.attachShader(this.shaderProgram,this.vertexShader),this.webgl.attachShader(this.shaderProgram,this.fragShader),this.webgl.linkProgram(this.shaderProgram),this.webgl.useProgram(this.shaderProgram),this.positionLocation=this.webgl.getAttribLocation(this.shaderProgram,"myPosition"),this.xshiftLocation=this.webgl.getUniformLocation(this.shaderProgram,"xshift"),this.yshiftLocation=this.webgl.getUniformLocation(this.shaderProgram,"yshift"),this.colorLocation=this.webgl.getUniformLocation(this.shaderProgram,"u_color")}createBuffer(t){const e=this.webgl.createBuffer();return this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,e),this.webgl.bufferData(this.webgl.ARRAY_BUFFER,Float32Array.from(t.flat()),this.webgl.STATIC_DRAW),e}clearColorBuffer(){this.webgl.clear(this.webgl.COLOR_BUFFER_BIT)}draw(t){this.webgl.useProgram(this.shaderProgram),this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,t.buffer),this.webgl.vertexAttribPointer(this.positionLocation,2,this.webgl.FLOAT,!1,0,0),this.webgl.enableVertexAttribArray(this.positionLocation),this.webgl.uniform1f(this.xshiftLocation,t.uniforms.xshift),this.webgl.uniform1f(this.yshiftLocation,t.uniforms.yshift),this.webgl.uniform4f(this.colorLocation,...t.uniforms.color,1),this.webgl.drawArrays(this.webgl.TRIANGLE_FAN,0,t.points.length)}}function n(){return function(t,e=0){return t.concat(Array(e).fill(0)).slice(0,e)}([...arguments],2)}class o{constructor(t){if(4!==t.length)throw new Error("Wrong number of vertices for a rectangle. Expected 4, but got "+t.length);this.points=t}get topLeft(){return this.points[0]}get topRight(){return this.points[1]}get bottomRight(){return this.points[2]}get bottomLeft(){return this.points[3]}get x(){return this.topLeft[0]}get y(){return this.topLeft[1]}get width(){return this.topRight[0]-this.topLeft[0]}get height(){return this.topLeft[1]-this.bottomLeft[1]}collides(t){const e=this.x<t.x+t.width,i=this.x+this.width>t.x,s=this.y>t.y-t.height,r=this.y-this.height<t.y;return e&&i&&s&&r}}class a extends o{constructor(t){super([n(-.15,-.925),n(.15,-.925),n(.15,-.975),n(-.15,-.975)]),this.velocity=0,this.shiftX=0,this.deltaTrans=.03,this.buffer=t.createBuffer(this.points)}get uniforms(){return{xshift:this.shiftX,yshift:0,color:t}}step(t,e){let i=e*this.deltaTrans;if(i*=t/25,this.topLeft[0]+i>=-1.01&&this.bottomRight[0]+i<1.01){this.shiftX+=i;for(let t=0;t<this.points.length;t++)this.points[t][0]=this.points[t][0]+i}}}const h=.1;class c extends o{constructor(t){const e=Math.floor(Math.random()*s.length),i=s[e],r=Math.random()*(1-h*i.size+1)-1;super([n(r,1.01+h*i.size),n(r+h*i.size,1.01+h*i.size),n(r+h*i.size,1.01),n(r,1.01)]),this.blockData=i,this.shiftY=0,this.deltaTrans=.01*this.blockData.speed,this.buffer=t.createBuffer(this.points)}get uniforms(){return{xshift:0,yshift:this.shiftY,color:this.blockData.color}}step(t,e=!1){let i=e?this.deltaTrans:-this.deltaTrans;i*=t/25,this.shiftY+=i;for(let t=0;t<this.points.length;t++)this.points[t][1]=this.points[t][1]+i}}const l=new Set,d={},f={},u=new class{get state(){return d}trackKeys(...t){for(const e of t)l.add(e)}untrackKeys(...t){for(const e of t)l.delete(e)}subscribe(t,e){f[t]||(f[t]=new Set),f[t].add(e)}unsubscribe(t,e){return f[t]||(f[t]=new Set),f[t].delete(e)}};document.addEventListener("keyup",(function(t){l.has(t.key)&&(t.preventDefault(),d[t.key]=!1)})),document.addEventListener("keydown",(function(t){l.has(t.key)&&(t.preventDefault(),d[t.key]=!0)})),document.addEventListener("keypress",(function(t){if(!(t.key in f))return;t.preventDefault();const e=f[t.key];for(const i of e.values())i(t)}));class p{constructor(t){this.timeIndicator=document.getElementById("time"),this.scoreIndicator=document.getElementById("score"),this.statusIndicator=document.getElementById("status"),this.playIndicator=document.getElementById("play"),this.maxTime=t,this.updateTime(this.maxTime),this.updateScore(0)}startGame(){this.playIndicator.parentElement.classList.add("hide"),this.scoreIndicator.textContent=0,this.updateTime(this.maxTime),this.statusIndicator.classList.remove("win"),this.statusIndicator.classList.remove("loss")}updateTime(t){let e=parseInt(t/60,10),i=parseInt(t%60,10);e=e<10?"0"+e:e,i=i<10?"0"+i:i,this.timeIndicator.textContent=e+":"+i}updateScore(t){this.scoreIndicator.textContent=t}gameOver(t=!0){this.statusIndicator.textContent=`YOU ${t?"WIN":"LOSE"}!`,this.statusIndicator.classList.add(t?"win":"loss"),this.playIndicator.parentElement.classList.remove("hide"),this.playIndicator.textContent="Press SPACE to play again!"}}var m=i(72),g=i.n(m),b=i(298),w=i.n(b),x=i(976),y=i.n(x),v=i(147),L=i.n(v),k=i(566),S=i.n(k),T=i(396),I=i.n(T),A=i(354),E={};E.styleTagTransform=I(),E.setAttributes=L(),E.insert=y().bind(null,"head"),E.domAPI=w(),E.insertStyleElement=S(),g()(A.Z,E),A.Z&&A.Z.locals&&A.Z.locals,new class{constructor(){this.tick=this.tick.bind(this),this.processTimer=this.processTimer.bind(this),this.startTimer=this.startTimer.bind(this),this.startGame=this.startGame.bind(this),this.initialize=this.initialize.bind(this),this.state={score:0,started:!1,timeLeft:60,lastFrame:performance.now()},document.addEventListener("DOMContentLoaded",this.initialize),u.subscribe(" ",this.startGame),u.trackKeys("ArrowLeft","ArrowRight")}initialize(){this.HUD=new p(60),this.renderer=new r(document.getElementById("gl-canvas")),this.player=new a(this.renderer),this.blocks=[],this.tick(performance.now())}tick(t){const e=t-this.state.lastFrame;this.state.lastFrame=t;const i=u.state.ArrowLeft?-1:u.state.ArrowRight?1:0;this.player.step(e,this.state.started?i:0);for(let t=0;t<this.blocks.length;t++)this.blocks[t].step(e),this.player.collides(this.blocks[t])?(this.addScore(this.blocks[t].blockData.points),this.blocks.splice(t,1),t--):this.blocks[t].y<=-1&&(this.blocks.splice(t,1),t--);this.renderer.clearColorBuffer(),this.renderer.draw(this.player);for(let t=0;t<this.blocks.length;t++)this.renderer.draw(this.blocks[t]);window.requestAnimationFrame(this.tick)}startGame(){this.state.started||(this.state.started=!0,this.state.score=0,this.HUD.startGame(),this.startTimer())}addScore(t){this.state.score=this.state.score+t,this.HUD.updateScore(this.state.score)}endGame(){this.state.started&&(this.state.started=!1,clearInterval(this.timer),this.HUD.gameOver(this.state.score>=500),this.blocks.splice(0,this.blocks.length))}startTimer(){this.state.timeLeft=60,this.timer=setInterval((()=>{--this.state.timeLeft<0&&(this.state.timeLeft=0),this.HUD.updateTime(this.state.timeLeft),this.processTimer(this.state.timeLeft)}),1e3)}processTimer(t){if(!t)return this.endGame();this.blocks.push(new c(this.renderer))}}})()})();