(()=>{"use strict";var t={354:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(916),s=i.n(r),o=i(282),n=i.n(o)()(s());n.push([t.id,'*,::before,::after{-webkit-box-sizing:border-box;box-sizing:border-box}html{width:512px;margin:10px auto 0 auto;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif,sans-serif;background:#1e1e1e;color:#ddd}.container{background:#3c3c3c;min-width:fit-content;padding:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.25);display:flex;flex-direction:column;align-items:center;gap:12px}.wide{width:512px;text-align:center}h2,h4{font-weight:700;color:#0f0}h2{margin:0}#info{padding:10px 20px;background-color:#252526;border-radius:12px;border:2px solid #000;gap:24px}#info p.blurb{margin:16px 16px 0 16px}#info h4{margin:0 0 12px 0}#info ul{margin:0 0 0 0;padding-left:0;list-style:none}#info li{padding-left:0}#info li span{display:flex;align-items:center;gap:12px}#info li+li{margin-top:5px}kbd{position:relative;display:inline-block;font-family:Consolas,Courier,monospace;top:-1px;border-radius:3px;padding:2px 5px;padding:4px 8px;border:1px solid #3d3e42;background:#898b90;color:#222325;box-shadow:0 2px 0 1px #3d3e42;font-weight:700;line-height:1;border:1px solid #999;background:#cacaca;color:#000;box-shadow:0 2px 0 1px #999}kbd:hover{top:1px;box-shadow:0 1px 0 .5px #3d3e42;box-shadow:0 1px 0 .5px #999}var{background:#898b90;color:#222325;font-style:normal;padding:4px 8px;border-radius:12px;font-weight:700}var.red{background:#8a0000;color:#fff}var.blue{background:#0000e0;color:#fff}var.white{background:#ddd;color:#000}.flex{display:flex;flex-wrap:wrap}.column{flex-direction:column}.flex-wrap{flex-wrap:wrap}.no-wrap{flex-wrap:nowrap}.flex-center{justify-content:center;align-items:center}.flex-align-center{align-items:center}.flex-justify-center{justify-content:center}.flex-space-evenly{justify-content:space-evenly}.flex-25{flex:0 0 25%;max-width:25%}.flex-33{flex:0 0 33.33333%;max-width:33.33333%}.flex-50{flex:0 0 50%;max-width:50%}.flex-66{flex:0 0 66.666666%;max-width:66.666666%}.flex-75{flex:0 0 75%;max-width:75%}@media only screen and (max-width:768px){.flex-25,.flex-33,.flex-50,.flex-66,.flex-75{flex:0 0 100%;max-width:100%}}#game-display{border-radius:12px;overflow:hidden}#hud{position:absolute;left:0;right:0;justify-content:space-between;padding:10px 20px;z-index:1;font-weight:600}#hud span[id]{color:#0f0}#canvas-wrap{position:relative}.overlay{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.9);transition:opacity 200ms ease;opacity:1}.overlay.hide{opacity:0}.overlay span{display:flex;justify-content:center;align-items:center;font-weight:600}#status{font-size:32px}#status.loss{color:red}#status.win{color:#0f0}#forkongithub,#forkongithub a{box-sizing:content-box}#forkongithub a{background:#000;color:#fff;text-decoration:none;font-family:arial,sans-serif;text-align:center;font-weight:700;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:background-color .5s,color .5s}#forkongithub a:hover{background:#0f0;color:#000}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#0f0}#forkongithub a::after{bottom:1px;top:auto}@media screen and (min-width:800px){#forkongithub{position:fixed;display:block;top:0;right:0;width:200px;overflow:hidden;height:200px;z-index:9999}#forkongithub a{width:200px;position:absolute;top:60px;right:-60px;transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,.8)}}',""]);const a=n},282:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var n={};if(r)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(n[h]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&n[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),e.push(c))}},e}},916:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var o={},n=[],a=0;a<t.length;a++){var h=t[a],l=r.base?h[0]+r.base:h[0],c=o[l]||0,d="".concat(l," ").concat(c);o[l]=c+1;var f=i(d),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var u=s(p,r);r.byIndex=a,e.splice(a,0,{identifier:d,updater:u,references:1})}n.push(d)}return n}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var o=r(t=t||[],s=s||{});return function(t){t=t||[];for(var n=0;n<o.length;n++){var a=i(o[n]);e[a].references--}for(var h=r(t,s),l=0;l<o.length;l++){var c=i(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=h}}},976:t=>{var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},566:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},147:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},298:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,s&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},396:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{const t=[0,1,0],e=[0,0,0],r=[{color:[1,0,0],speed:1,size:2.5,points:1},{color:[0,0,1],speed:2,size:1.5,points:5},{color:[1,1,1],speed:3,size:1,points:25}];class s{constructor(t){if(this.webgl=t.getContext("webgl"),!this.webgl)return alert("WebGL is not available");this.webgl.viewport(0,0,512,512),this.webgl.clearColor(...e,1),this.webgl.clear(this.webgl.COLOR_BUFFER_BIT),this.vertexShader=this.webgl.createShader(this.webgl.VERTEX_SHADER),this.webgl.shaderSource(this.vertexShader,"attribute vec4 myPosition;\n\nuniform float xshift;\nuniform float yshift;\nmat3 Mtrans;\n\nvoid main() {\nvec3 vi;\nvi[0] = myPosition.x;\nvi[1] = myPosition.y;\nvi[2] = 1.0;\nMtrans = mat3(1,0,0,\n              0,1,0,\n              xshift,yshift,1);\n    vi = Mtrans * vi;\n    gl_PointSize = 1.0;\n    gl_Position.x = vi[0];\n    gl_Position.y = vi[1];\n    gl_Position.z = 0.0;\n    gl_Position.w = 1.0;\n}"),this.webgl.compileShader(this.vertexShader),this.fragShader=this.webgl.createShader(this.webgl.FRAGMENT_SHADER),this.webgl.shaderSource(this.fragShader,"precision mediump float;\n\nuniform vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}"),this.webgl.compileShader(this.fragShader),this.shaderProgram=this.webgl.createProgram(),this.webgl.attachShader(this.shaderProgram,this.vertexShader),this.webgl.attachShader(this.shaderProgram,this.fragShader),this.webgl.linkProgram(this.shaderProgram),this.webgl.useProgram(this.shaderProgram),this.positionLocation=this.webgl.getAttribLocation(this.shaderProgram,"myPosition"),this.xshiftLocation=this.webgl.getUniformLocation(this.shaderProgram,"xshift"),this.yshiftLocation=this.webgl.getUniformLocation(this.shaderProgram,"yshift"),this.colorLocation=this.webgl.getUniformLocation(this.shaderProgram,"u_color")}createBuffer(t){const e=this.webgl.createBuffer();return this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,e),this.webgl.bufferData(this.webgl.ARRAY_BUFFER,Float32Array.from(t.flat()),this.webgl.STATIC_DRAW),e}clearColorBuffer(){this.webgl.clear(this.webgl.COLOR_BUFFER_BIT)}draw(t){this.webgl.useProgram(this.shaderProgram),this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,t.buffer),this.webgl.vertexAttribPointer(this.positionLocation,2,this.webgl.FLOAT,!1,0,0),this.webgl.enableVertexAttribArray(this.positionLocation),this.webgl.uniform1f(this.xshiftLocation,t.uniforms.xshift),this.webgl.uniform1f(this.yshiftLocation,t.uniforms.yshift),this.webgl.uniform4f(this.colorLocation,...t.uniforms.color,1),this.webgl.drawArrays(this.webgl.TRIANGLE_FAN,0,t.points.length)}}function o(){return function(t,e=0){return t.concat(Array(e).fill(0)).slice(0,e)}([...arguments],2)}class n{constructor(t){if(4!==t.length)throw new Error("Wrong number of vertices for a rectangle. Expected 4, but got "+t.length);this.points=t}get topLeft(){return this.points[0]}get topRight(){return this.points[1]}get bottomRight(){return this.points[2]}get bottomLeft(){return this.points[3]}get x(){return this.topLeft[0]}get y(){return this.topLeft[1]}get width(){return this.topRight[0]-this.topLeft[0]}get height(){return this.topLeft[1]-this.bottomLeft[1]}collides(t){const e=this.x<t.x+t.width,i=this.x+this.width>t.x,r=this.y>t.y-t.height,s=this.y-this.height<t.y;return e&&i&&r&&s}}class a extends n{constructor(t){super([o(-.15,-.925),o(.15,-.925),o(.15,-.975),o(-.15,-.975)]),this.velocity=0,this.shiftX=0,this.deltaTrans=.03,this.buffer=t.createBuffer(this.points)}get uniforms(){return{xshift:this.shiftX,yshift:0,color:t}}step(t,e){let i=e*this.deltaTrans;if(i*=t/25,this.topLeft[0]+i>=-1.01&&this.bottomRight[0]+i<1.01){this.shiftX+=i;for(let t=0;t<this.points.length;t++)this.points[t][0]=this.points[t][0]+i}}}const h=.1;class l extends n{constructor(t){const e=Math.floor(Math.random()*r.length),i=r[e],s=Math.random()*(1-h*i.size+1)-1;super([o(s,1.01+h*i.size),o(s+h*i.size,1.01+h*i.size),o(s+h*i.size,1.01),o(s,1.01)]),this.blockData=i,this.shiftY=0,this.deltaTrans=.01*this.blockData.speed,this.buffer=t.createBuffer(this.points)}get uniforms(){return{xshift:0,yshift:this.shiftY,color:this.blockData.color}}step(t,e=!1){let i=e?this.deltaTrans:-this.deltaTrans;i*=t/25,this.shiftY+=i;for(let t=0;t<this.points.length;t++)this.points[t][1]=this.points[t][1]+i}}const c=new Set,d={},f={},p=new class{get state(){return d}trackKeys(...t){for(const e of t)c.add(e)}untrackKeys(...t){for(const e of t)c.delete(e)}subscribe(t,e){f[t]||(f[t]=new Set),f[t].add(e)}unsubscribe(t,e){return f[t]||(f[t]=new Set),f[t].delete(e)}};document.addEventListener("keyup",(function(t){c.has(t.key)&&(t.preventDefault(),d[t.key]=!1)})),document.addEventListener("keydown",(function(t){c.has(t.key)&&(t.preventDefault(),d[t.key]=!0)})),document.addEventListener("keypress",(function(t){if(!(t.key in f))return;t.preventDefault();const e=f[t.key];for(const i of e.values())i(t)}));class u{constructor(t){this.timeIndicator=document.getElementById("time"),this.scoreIndicator=document.getElementById("score"),this.statusIndicator=document.getElementById("status"),this.playIndicator=document.getElementById("play"),this.maxTime=t,this.updateTime(this.maxTime),this.updateScore(0)}startGame(){this.playIndicator.parentElement.classList.add("hide"),this.scoreIndicator.textContent=0,this.updateTime(this.maxTime),this.statusIndicator.classList.remove("win"),this.statusIndicator.classList.remove("loss")}updateTime(t){let e=parseInt(t/60,10),i=parseInt(t%60,10);e=e<10?"0"+e:e,i=i<10?"0"+i:i,this.timeIndicator.textContent=e+":"+i}updateScore(t){this.scoreIndicator.textContent=t}gameOver(t=!0){this.statusIndicator.textContent=`YOU ${t?"WIN":"LOSE"}!`,this.statusIndicator.classList.add(t?"win":"loss"),this.playIndicator.parentElement.classList.remove("hide"),this.playIndicator.textContent="Press SPACE to play again!"}}var g=i(72),m=i.n(g),b=i(298),x=i.n(b),w=i(976),y=i.n(w),v=i(147),k=i.n(v),L=i(566),S=i.n(L),T=i(396),I=i.n(T),A=i(354),E={};E.styleTagTransform=I(),E.setAttributes=k(),E.insert=y().bind(null,"head"),E.domAPI=x(),E.insertStyleElement=S(),m()(A.Z,E),A.Z&&A.Z.locals&&A.Z.locals,new class{constructor(){this.tick=this.tick.bind(this),this.processTimer=this.processTimer.bind(this),this.startTimer=this.startTimer.bind(this),this.startGame=this.startGame.bind(this),this.initialize=this.initialize.bind(this),this.state={score:0,started:!1,timeLeft:60,lastFrame:performance.now()},document.addEventListener("DOMContentLoaded",this.initialize),p.subscribe(" ",this.startGame),p.trackKeys("ArrowLeft","ArrowRight")}initialize(){this.HUD=new u(60),this.renderer=new s(document.getElementById("gl-canvas")),this.player=new a(this.renderer),this.blocks=[],this.tick(performance.now())}tick(t){const e=t-this.state.lastFrame;this.state.lastFrame=t;const i=p.state.ArrowLeft?-1:p.state.ArrowRight?1:0;this.player.step(e,this.state.started?i:0);for(let t=0;t<this.blocks.length;t++)this.blocks[t].step(e),this.player.collides(this.blocks[t])?(this.addScore(this.blocks[t].blockData.points),this.blocks.splice(t,1),t--):this.blocks[t].y<=-1&&(this.blocks.splice(t,1),t--);this.renderer.clearColorBuffer(),this.renderer.draw(this.player);for(let t=0;t<this.blocks.length;t++)this.renderer.draw(this.blocks[t]);window.requestAnimationFrame(this.tick)}startGame(){this.state.started||(this.state.started=!0,this.state.score=0,this.HUD.startGame(),this.startTimer())}addScore(t){this.state.score=this.state.score+t,this.HUD.updateScore(this.state.score)}endGame(){this.state.started&&(this.state.started=!1,clearInterval(this.timer),this.HUD.gameOver(this.state.score>=500),this.blocks.splice(0,this.blocks.length))}startTimer(){this.state.timeLeft=60,this.timer=setInterval((()=>{--this.state.timeLeft<0&&(this.state.timeLeft=0),this.HUD.updateTime(this.state.timeLeft),this.processTimer(this.state.timeLeft)}),1e3)}processTimer(t){if(!t)return this.endGame();this.blocks.push(new l(this.renderer))}}})()})();